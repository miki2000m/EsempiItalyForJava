RIEPILOGO SULLA RIPRODUZIONE AUDIO IN JAVA (`javax.sound.sampled`)

Java fornisce un'API standard per la gestione di audio campionato (sampled audio), contenuta nel package `javax.sound.sampled`. Questa API permette di leggere, scrivere, e riprodurre formati audio comuni come WAV, AU, e AIFF.

--- COMPONENTI CHIAVE DELL'API ---

Per riprodurre un file audio, sono necessari alcuni oggetti che lavorano in sequenza:

1.  **`File`**:
    - Un oggetto `java.io.File` che rappresenta il file audio sul disco (es. `canzone.wav`).

2.  **`AudioInputStream`**:
    - È un flusso di input specializzato per l'audio. Rappresenta i dati audio letti dal file.
    - Si ottiene tramite `AudioSystem.getAudioInputStream(file)`.
    - Contiene non solo i dati audio grezzi, ma anche le informazioni sul formato (frequenza di campionamento, numero di canali, ecc.).

3.  **`Clip`**:
    - È l'oggetto che effettivamente "suona" l'audio. Un `Clip` è una linea audio speciale che può essere **pre-caricata con dati audio in memoria** prima della riproduzione.
    - Questo lo rende ideale per suoni che devono essere riprodotti più volte o che richiedono un controllo preciso (start, stop, loop), come effetti sonori o brevi tracce musicali.
    - Si ottiene un `Clip` vuoto con `AudioSystem.getClip()`.
    - Si carica l'audio nel `Clip` con `clip.open(audioInputStream)`.

--- PROCESSO DI RIPRODUZIONE ---

Il flusso di lavoro per riprodurre un file audio è il seguente:

1.  **Creare un `File`**:
    `File fileAudio = new File("percorso/del/tuo/file.wav");`

2.  **Ottenere un `AudioInputStream` dal file**:
    `AudioInputStream audioStream = AudioSystem.getAudioInputStream(fileAudio);`

3.  **Ottenere e aprire un `Clip`**:
    `Clip clip = AudioSystem.getClip();`
    `clip.open(audioStream);`
    In questo momento, i dati audio vengono caricati dal flusso alla memoria del `Clip`.

4.  **Controllare la riproduzione**:
    Una volta che il `Clip` è "aperto", puoi controllarlo con i suoi metodi.

--- METODI PRINCIPALI DI `Clip` ---

*   `start()`: Avvia la riproduzione dell'audio dal punto in cui si era fermata. Se è la prima volta, parte dall'inizio.

*   `stop()`: Mette in pausa la riproduzione. La posizione corrente viene mantenuta. Una successiva chiamata a `start()` riprenderà da questo punto.

*   `close()`: Rilascia le risorse di sistema usate dal `Clip`. Dopo aver chiamato `close()`, il `Clip` non può più essere usato.

*   `loop(int count)`: Fa ripetere la riproduzione.
    - `loop(0)`: Ripete una volta (equivalente a `start()`).
    - `loop(5)`: Ripete 6 volte in totale (la prima più 5 ripetizioni).
    - `loop(Clip.LOOP_CONTINUOUSLY)`: Ripete all'infinito.

*   `setMicrosecondPosition(long microseconds)`: Sposta il "cursore" di riproduzione a un punto specifico nel tempo, misurato in microsecondi. Utile per implementare una funzione di "riavvolgimento" o per saltare a una parte specifica della traccia.
    - `clip.setMicrosecondPosition(0);` riavvolge la traccia all'inizio.

*   `isActive()`: Restituisce `true` se il `Clip` è attualmente in riproduzione.

--- GESTIONE DELLE ECCEZIONI ---

Il processo di caricamento e riproduzione audio può lanciare diverse eccezioni che è importante gestire:

- `UnsupportedAudioFileException`: Se il formato del file audio non è riconosciuto o supportato da Java.
- `IOException`: Se si verifica un errore durante la lettura del file dal disco.
- `LineUnavailableException`: Se una linea audio (come un `Clip`) non può essere aperta perché le risorse audio del sistema sono già tutte in uso.

È buona pratica racchiudere il codice di gestione audio in un blocco `try-catch` per gestire questi possibili errori in modo pulito.
