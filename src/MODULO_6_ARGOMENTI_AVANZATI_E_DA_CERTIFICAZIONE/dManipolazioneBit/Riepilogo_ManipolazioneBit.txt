RIEPILOGO SULLA MANIPOLAZIONE DEI BIT IN JAVA

Lavorare a livello di bit significa manipolare direttamente la rappresentazione binaria dei dati. È un'operazione di basso livello, fondamentale in ambiti come la crittografia, la compressione, la grafica e la programmazione di sistema. Java offre due meccanismi principali per farlo.

--- 1. OPERATORI BITWISE ---

Questi operatori si applicano ai tipi di dato primitivi interi (`byte`, `short`, `int`, `long`) e lavorano sulla loro rappresentazione binaria.

- **`&` (AND Bit a Bit):**
  - **Logica:** Un bit del risultato è `1` solo se entrambi i bit corrispondenti negli operandi sono `1`.
  - **Uso Comune:** "Mascherare" i bit, cioè estrarre un sottoinsieme di bit da un numero.
    `risultato = numero & MASK;`

- **`|` (OR Bit a Bit):**
  - **Logica:** Un bit del risultato è `1` se almeno uno dei bit corrispondenti negli operandi è `1`.
  - **Uso Comune:** "Impostare" o "accendere" specifici bit.
    `risultato = numero | FLAG;`

- **`^` (XOR Bit a Bit - OR Esclusivo):**
  - **Logica:** Un bit del risultato è `1` solo se i bit corrispondenti negli operandi sono **diversi**.
  - **Uso Comune:** "Invertire" o "flippare" specifici bit. Eseguire XOR due volte con lo stesso valore ripristina il valore originale (`(a ^ b) ^ b` risulta in `a`), una proprietà usata in alcuni algoritmi di crittografia semplice.

- **`~` (NOT Bit a Bit - Complemento a Uno):**
  - **Logica:** È un operatore unario che inverte tutti i bit dell'operando (da `0` a `1` e da `1` a `0`).
  - **Nota:** Il risultato può essere sorprendente a causa della rappresentazione dei numeri negativi in "complemento a due". Ad esempio, `~5` (`~00000101`) diventa `11111010`, che rappresenta `-6`.

- **`<<` (Left Shift):**
  - **Logica:** Sposta tutti i bit di un numero a sinistra di una data quantità di posizioni. I nuovi bit a destra vengono riempiti con `0`.
  - **Effetto Matematico:** Spostare a sinistra di `n` posizioni equivale a moltiplicare per `2^n`.
    `10 << 2; // 10 * 2^2 = 40`

- **`>>` (Signed Right Shift):**
  - **Logica:** Sposta tutti i bit a destra. Il bit più a sinistra (il "bit del segno") viene **copiato** per riempire le nuove posizioni a sinistra.
  - **Effetto Matematico:** Mantiene il segno del numero. Equivale a una divisione per `2^n`.
    `-8 >> 1; // -4`

- **`>>>` (Unsigned Right Shift):**
  - **Logica:** Sposta tutti i bit a destra. Le nuove posizioni a sinistra vengono **sempre riempite con `0`**, indipendentemente dal segno del numero.
  - **Uso:** Utile quando si vogliono trattare i bit di un numero come una sequenza pura, senza il significato aritmetico del segno.

--- 2. LA CLASSE `java.util.BitSet` ---

Un `BitSet` è una classe che rappresenta un **vettore di bit** a dimensione dinamica. È molto più flessibile e spesso più facile da usare degli operatori bitwise per gestire grandi insiemi di flag booleani.

**Caratteristiche Principali:**
- **Efficienza di Spazio:** È estremamente efficiente in termini di memoria. Un `BitSet` che deve memorizzare 1.000.000 di flag booleani userà circa 125 KB, mentre un `boolean[1000000]` ne userebbe circa 1 MB.
- **Dimensione Dinamica:** Un `BitSet` cresce automaticamente man mano che si impostano bit a indici più alti.
- **Indicizzato da Zero:** Come gli array, gli indici dei bit partono da 0.

**Metodi Fondamentali:**
- **`set(int bitIndex)`**: Imposta il bit all'indice specificato a `true` (1).
- **`clear(int bitIndex)`**: Imposta il bit all'indice specificato a `false` (0).
- **`flip(int bitIndex)`**: Inverte il valore del bit all'indice specificato.
- **`get(int bitIndex)`**: Restituisce lo stato (`true` o `false`) del bit all'indice specificato.
- **`length()`**: Restituisce l'indice del bit più alto impostato a `true`, più uno. Può essere visto come la "dimensione logica" del set.
- **`size()`**: Restituisce la quantità di spazio (in bit) attualmente allocata in memoria dal `BitSet`.

**Operazioni Logiche tra `BitSet`:**
`BitSet` fornisce metodi per eseguire operazioni logiche tra due set, modificando il `BitSet` su cui viene chiamato il metodo.
- **`and(BitSet set)`**: Esegue un AND logico.
- **`or(BitSet set)`**: Esegue un OR logico.
- **`xor(BitSet set)`**: Esegue uno XOR logico.
- **`andNot(BitSet set)`**: Esegue un'operazione di "cancellazione" ( `bs1.andNot(bs2)` rimuove da `bs1` tutti i bit presenti in `bs2`).

**Quando usare `BitSet`?**
- Quando devi gestire un grande numero di flag on/off.
- Quando devi eseguire operazioni logiche complesse (unione, intersezione, differenza) su insiemi di stati booleani.
- Quando l'efficienza di memoria è una priorità.
