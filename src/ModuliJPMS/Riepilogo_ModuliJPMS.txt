RIEPILOGO SUL JAVA PLATFORM MODULE SYSTEM (JPMS)

Il Java Platform Module System (JPMS), introdotto in Java 9, è un cambiamento fondamentale nel modo in cui le applicazioni Java vengono strutturate e distribuite. Il suo obiettivo è risolvere il problema del "classpath hell" e fornire un'incapsulamento più forte.

**Concetto Fondamentale:** Un **modulo** è un insieme di package correlati, progettato per essere riutilizzato. Ogni modulo dichiara esplicitamente:
1.  Le sue **dipendenze** (quali altri moduli gli servono per funzionare).
2.  I **package che espone** (quali parti del suo codice sono pubbliche per altri moduli).

--- IL FILE `module-info.java` ---

Il cuore di un modulo è il file `module-info.java`, che deve trovarsi nella root del codice sorgente del modulo. Questo file definisce le proprietà del modulo.

**Direttive Principali:**

**1. `module nome.del.modulo { ... }`**
   Dichiara un modulo. Per convenzione, il nome del modulo segue spesso il nome del package principale che contiene.

**2. `requires nome.altro.modulo;`**
   Dichiara una **dipendenza**. Il modulo corrente ha bisogno del codice esposto da `nome.altro.modulo` per compilare ed essere eseguito. Questa è la base dell'**affidabilità della configurazione**: se un modulo richiesto manca, l'applicazione non parte.

**3. `exports nome.del.package;`**
   Rende i tipi `public` del package `nome.del.package` accessibili ai moduli che dipendono da questo modulo. Questa è la base dell'**incapsulamento forte**: per default, tutto ciò che è in un modulo è privato a quel modulo, anche se è dichiarato `public`. Devi esportarlo esplicitamente per renderlo visibile all'esterno.

**Esempio di Struttura:**

`-- src`
`   |-- app.main`
`   |   |-- module-info.java`
`   |   `-- com/main/MainApp.java`
`   `-- app.service`
`       |-- module-info.java`
`       `-- com/service/GreetingService.java`

**`app.service/module-info.java`:**
`module app.service {`
`    exports com.service; // Rende pubblico il package com.service`
`}`

**`app.main/module-info.java`:**
`module app.main {`
`    requires app.service; // Dichiara che app.main dipende da app.service`
`}`

--- VANTAGGI DEL JPMS ---

1.  **Affidabilità della Configurazione (Reliable Configuration):** L'applicazione non si avvia se mancano dei moduli o se ci sono conflitti, evitando errori a runtime.
2.  **Incapsulamento Forte (Strong Encapsulation):** Le classi interne di una libreria (anche se `public`) non sono accessibili per default, impedendo l'uso di API non destinate al pubblico e rendendo le librerie più facili da manutenere.
3.  **Scalabilità e Performance:** Permette di creare immagini di runtime personalizzate (con `jlink`) che includono solo i moduli strettamente necessari, riducendo la dimensione dell'applicazione.

--- CLASSPATH vs MODULE PATH ---

- **Classpath:** Il vecchio modo. Un "calderone" di file `.class` e JAR. Non c'è controllo sulle dipendenze o sui conflitti di versione.
- **Module Path:** Il nuovo modo. Un percorso in cui la JVM cerca i moduli. La JVM analizza i file `module-info.java` per costruire un "grafo di leggibilità" e assicurarsi che tutte le dipendenze siano soddisfatte.

--- MIGRAZIONE: MODULI SENZA NOME E AUTOMATICI ---

Per facilitare la transizione, JPMS introduce due concetti:

- **Modulo Senza Nome (Unnamed Module):** Tutti i JAR e le classi caricate dal classpath finiscono in questo speciale modulo. Può leggere tutti gli altri moduli, ma il suo codice non può essere letto dai moduli nominati. È una misura di retrocompatibilità.
- **Modulo Automatico (Automatic Module):** Se metti un JAR tradizionale (senza `module-info.java`) nel module path, viene trattato come un modulo automatico. Il nome del modulo viene derivato dal nome del JAR. Un modulo automatico, per compatibilità, **esporta tutti i suoi package** e **può leggere tutti gli altri moduli**.

Questi meccanismi permettono di usare librerie vecchie in un'applicazione a moduli, ma sono da considerare come una soluzione temporanea durante la migrazione.

IN SINTESI:
JPMS è un sistema che porta ordine e robustezza nell'ecosistema Java. Anche se per progetti piccoli può sembrare un'aggiunta complessa, è fondamentale per costruire applicazioni grandi, manutenibili e performanti.
